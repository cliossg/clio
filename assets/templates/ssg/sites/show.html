{{ define "content" }}
{{ $isAdmin := hasRole .CurrentUserRoles "admin" }}
{{ $canEdit := or $isAdmin (hasRole .CurrentUserRoles "editor") }}
<div class="card">
    <p class="breadcrumb"><a href="/ssg/list-sites">‚Üê Sites</a></p>
    <div class="card-header">
        <h1>{{ .Site.Name }}</h1>
        {{ if $isAdmin }}
        <div>
            <a href="/ssg/edit-site?id={{ .Site.ID }}" class="btn">Edit</a>
            <form method="POST" action="/ssg/delete-site" style="display:inline;">
                <input type="hidden" name="id" value="{{ .Site.ID }}">
                <button type="submit" class="btn btn-danger" onclick="return confirm('Delete this site and all its content?')">Delete</button>
            </form>
        </div>
        {{ end }}
    </div>

    <dl class="detail-list">
        <dt>Slug</dt>
        <dd><code>{{ .Site.Slug }}</code></dd>

        <dt>Status</dt>
        <dd>{{ if .Site.Active }}<span class="badge badge-success">Active</span>{{ else }}<span class="badge badge-warning">Inactive</span>{{ end }}</dd>

        <dt>Created</dt>
        <dd>{{ .Site.CreatedAt.Format "Jan 02, 2006 15:04" }}</dd>

        <dt>Updated</dt>
        <dd>{{ .Site.UpdatedAt.Format "Jan 02, 2006 15:04" }}</dd>
    </dl>

    <div class="site-nav">
        <h3>Content Management</h3>
        <div class="nav-grid">
            <a href="/ssg/list-contents?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Content</strong>
                <span>Manage posts, pages, and articles</span>
            </a>
            {{ if $isAdmin }}
            <a href="/ssg/list-sections?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Sections</strong>
                <span>Organize content into sections</span>
            </a>
            {{ end }}
            <a href="/ssg/list-tags?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Tags</strong>
                <span>Categorize and tag content</span>
            </a>
            <a href="/ssg/list-images?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Images</strong>
                <span>Manage media assets</span>
            </a>
        </div>

        {{ if $isAdmin }}
        <h3>Site Configuration</h3>
        <div class="nav-grid">
            <a href="/ssg/list-layouts?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Layouts</strong>
                <span>Content display templates</span>
            </a>
            <a href="/ssg/list-settings?site_id={{ .Site.ID }}" class="nav-card">
                <strong>Settings</strong>
                <span>Site settings and configuration</span>
            </a>
        </div>
        {{ end }}

        {{ if $canEdit }}
        <h3>Generation</h3>
        <div class="nav-grid">
            <form method="POST" action="/ssg/backup-markdown" class="nav-card-form">
                <input type="hidden" name="site_id" value="{{ .Site.ID }}">
                <button type="submit" class="nav-card">
                    <strong>Backup Markdown</strong>
                    <span>Export and version content as .md files</span>
                </button>
            </form>
            <a href="http://{{ .Site.Slug }}.localhost:3000/" target="_blank" class="nav-card">
                <strong>Preview</strong>
                <span>Live preview with auto-generation</span>
            </a>
            <form method="POST" action="/ssg/publish" class="nav-card-form">
                <input type="hidden" name="site_id" value="{{ .Site.ID }}">
                <button type="submit" class="nav-card">
                    <strong>Publish</strong>
                    <span>Deploy to Git repository</span>
                </button>
            </form>
        </div>
        {{ end }}
    </div>

</div>
{{ end }}
